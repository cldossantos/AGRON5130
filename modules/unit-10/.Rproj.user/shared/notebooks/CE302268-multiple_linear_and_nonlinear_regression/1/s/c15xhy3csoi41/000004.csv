"0","library(tidyverse)"
"0","library(urbnmapr)"
"0","library(sf)"
"0","library(leaflet)"
"0",""
"0","counties = read.csv(""data/county_environments.csv"")"
"0",""
"0","## get county shapes ##"
"0","counties_sf = get_urbn_map(""counties"", sf = TRUE) %>%"
"0","    rename(stco = county_fips) %>%"
"0","    mutate(stco = as.numeric(stco))"
"0",""
"0","counties_w_env = counties_sf %>%"
"0","  left_join(counties) %>%"
"0","  st_as_sf() %>%"
"0","  st_transform(4326) %>%"
"0","  gather(feature, value, ppt:wheat)"
"0",""
"0",""
"0","library(shiny)"
"0",""
"0","ui <- fluidPage("
"0","  sidebarLayout("
"0","    sidebarPanel("
"0","      selectInput(""feature"", ""Select feature:"", choices = unique(counties_w_env$feature))"
"0","    ),"
"0","    mainPanel("
"0","      leafletOutput(""map"")"
"0","    )"
"0","  )"
"0",")"
"0",""
"0","server <- function(input, output, session) {"
"0","  filteredData = reactive({"
"0","    out_data = counties_w_env %>%"
"0","      filter(feature==input$feature)"
"0","  })"
"0",""
"0","  output$map = renderLeaflet({"
"0","    in_data = filteredData()"
"0","    pal_lm <- colorNumeric(grDevices::rainbow(5), in_data$value, reverse = TRUE)"
"0","    leaflet(in_data) %>%"
"0","      addTiles() %>%"
"0","      addPolygons("
"0","        weight = 0.3,"
"0","        color = ""black"","
"0","        fillColor = ~pal_lm(value),"
"0","        fillOpacity = 0.5, smoothFactor = 0.5,"
"0","        popup = ~paste0(county_name, ""<br>"", value),"
"0","        layerId = ~stco"
"0","      ) %>%"
"0","       addLegend(""bottomright"","
"0","                pal = pal_lm,"
"0","                values=~value,"
"0","                title=""Values"")"
"0","  })  "
"0","}"
"0",""
"0","shinyApp(ui, server)"
"2","
"
