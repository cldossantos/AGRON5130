"0",""
"0","##### Run this as-is: Do not modify !! #######"
"0",""
"0",""
"0",""
"0","library(FedData)"
"2","Loading required package: sp
"
"2","Registered S3 method overwritten by 'data.table':
  method           from
  print.data.table     
"
"0","library(sp)"
"0","soil_data_sp = as(field, ""Spatial"")"
"0","soil_map = get_ssurgo(soil_data_sp, ""example"")"
"0","soil_sf = st_as_sf(soil_map$spatial) %>%"
"0","  st_set_crs(4326)"
"0",""
"0","mu_point = soil_map$tabular$mapunit %>%"
"0","  dplyr::select(musym, muname, mukey)"
"0",""
"0","# get measures of sand, silt, clay, etc"
"0","horizon_diagnostics = soil_map$tabular$chorizon %>%"
"0","  select(hzname, sandtotal.r, silttotal.r, claytotal.r, om.r, awc.r, ksat.r, cec7.r, cokey, chkey)"
"0",""
"0","# soil texture class"
"0","texture = soil_map$tabular$chtexturegrp %>%"
"0","  filter(rvindicator==""Yes"") %>%"
"0","  select(texdesc, chkey)"
"0",""
"0","# percent slope and drainage class"
"0","slope = soil_map$tabular$component %>%"
"0","  select(drainagecl, slope.r, mukey, cokey)"
"0",""
"0","parent_material = soil_map$tabular$copm %>%"
"0","  filter(pmorder==1 | is.na(pmorder)) %>%"
"0","  select(pmkind, copmgrpkey, copmkey)"
"0",""
"0","pm_group = soil_map$tabular$copmgrp %>%"
"0","  select(cokey, copmgrpkey)"
"0",""
"0","component = soil_map$tabular$component %>%"
"0","  select(mukey, cokey)"
"0",""
"0","all_soil_data = mu_point %>%"
"0","  left_join(component) %>%"
"0","  left_join(horizon_diagnostics) %>%"
"0","  group_by(mukey) %>%"
"0","  filter(chkey==min(chkey)) %>%"
"0","  ungroup() %>%"
"0","  left_join(texture) %>%"
"0","  left_join(slope) %>%"
"0","  left_join(pm_group) %>%"
"0","  left_join(parent_material) %>%"
"0","  select(-c(copmgrpkey, copmkey, musym, cokey)) "
"2","Joining, by = ""mukey""
"
"2","Joining, by = ""cokey""
"
"2","Joining, by = ""chkey""
"
"2","Joining, by = c(""mukey"", ""cokey"")
"
"2","Joining, by = ""cokey""
"
"2","Joining, by = ""copmgrpkey""
"
"0","complete_soil_data = soil_sf %>%"
"0","  rename_all(tolower) %>%"
"0","  mutate(mukey = as.numeric(mukey)) %>%"
"0","  left_join(all_soil_data)"
"2","Joining, by = ""mukey""
"
